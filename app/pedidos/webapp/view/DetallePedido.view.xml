<mvc:View
	controllerName="pedidos.controller.DetallePedido"
	xmlns:mvc="sap.ui.core.mvc"
	xmlns:l="sap.ui.layout"
	xmlns:f="sap.ui.layout.form"
	xmlns:core="sap.ui.core"
	xmlns="sap.m" 
	xmlns:t="sap.ui.table">

	<VBox class="sapUiSmallMargin">
		<f:Form id="FormToolbar"
			editable="true"
			ariaLabelledBy="Title1">

			<f:toolbar>
				<Toolbar id="TB1">
					<Title id="Title1" text="Detalles del pedido"/>
					<ToolbarSpacer />
					<Button icon="sap-icon://settings"/>
					<Button icon="sap-icon://drop-down-list" />
				</Toolbar>
			</f:toolbar>

			<f:layout>
				<f:ResponsiveGridLayout
					labelSpanXL="4"
					labelSpanL="3"
					labelSpanM="4"
					labelSpanS="12"
					adjustLabelSpan="false"
					emptySpanXL="0"
					emptySpanL="4"
					emptySpanM="0"
					emptySpanS="0"
					columnsXL="2"
					columnsL="1"
					columnsM="1"
					singleContainerFullSize="false" />
			</f:layout>

			<f:formContainers>
				<f:FormContainer ariaLabelledBy="Title2">
					<f:toolbar>
						<Toolbar>
							<Title id="Title2" text="Pedido {Id}"/>
							<ToolbarSpacer />
							<Button id="btnEditarPedido" text="Editar pedido" press="onHacerEditable"/>
						</Toolbar>
					</f:toolbar>
					<f:formElements>
						<f:FormElement label="Cliente">
							<f:fields>
								<ComboBox
								id="inputClientePedido"
								editable="false"
                                    items="{ path: '/Cliente'}" selectedKey="{Cliente_Id}">
                                    <core:Item key="{Id}" text="{Nombre}" />
                                </ComboBox>
							</f:fields>
						</f:FormElement>
						<f:FormElement label="Fecha">
							<f:fields>
								<DatePicker 
								editable="false" id="inputFechaPedido" dateValue="{Fecha_Pedido}" displayFormat="dd/MM/yyyy" />
							</f:fields>
						</f:FormElement>
					</f:formElements>
				</f:FormContainer>
			</f:formContainers>
		</f:Form>

		<Toolbar id="TB2">
			<Title id="Title3" text="Nueva linea del pedido"/>
			<ToolbarSpacer />
			<Button id="btnAgregarLinea" text="Nueva linea" press="onAgregarLinea" enabled="false"/>
			<Button id="btnEliminarLinea" text="Eliminar" press="onEliminarLinea" enabled="false"/>
		</Toolbar>
		

		<VBox>
			<t:Table 
			id="tablaLineas"
			rows="{ path: 'Lineas', parameters: {expand: 'Caja, Calibre, Producto'}}" 
				selectionMode="MultiToggle"
				ariaLabelledBy="title">
		
					<!--items="{
						path: '/Pedido', parameters: {expand: 'Linea'}
					}"> Solo se ve el ID de los pedidos-->
					<t:columns>
						<t:Column><Text text="Id"/></t:Column>
						<t:Column><Text text="Producto"/></t:Column>
						<t:Column><Text text="Caja"/></t:Column>
						<t:Column><Text text="Calibre"/></t:Column>
						<t:Column><Text text="Kilos"/></t:Column>
						<t:Column><Text text="Precio"/></t:Column>
					</t:columns>

					<t:columns>
						<t:Column>
							<Label text="Id" />
							<t:template>
								<Text text="{Id}" wrapping="false"/>
							</t:template>
						</t:Column>

						<t:Column>
							<Label text="Producto" />
							<t:template>
								<Text text="{Producto/Nombre}" wrapping="false"/>
							</t:template>
						</t:Column>	

						<t:Column>
							<Label text="Caja" />
							<t:template>
								<Text text="{Caja/Nombre}" wrapping="false"/>
							</t:template>
						</t:Column>		

						<t:Column>
							<Label text="Calibre" />
							<t:template>
								<Text text="{Calibre/Nombre}" wrapping="false"/>
							</t:template>
						</t:Column>	

						<t:Column>
							<Label text="Kilos" />
							<t:template>
								<Text text="{Kilos}" wrapping="false"/>								
							</t:template>
						</t:Column>	

						<t:Column>
							<Label text="Precio" />
							<t:template>
								<Text text="{Precio}" wrapping="false"/>
							</t:template>
						</t:Column>	

						<t:Column>
							<Label text="Entradas" />
							<t:template>
								<Input value="{Entradas}" editable="false" />								
							</t:template>
						</t:Column>	

					</t:columns>

			
			</t:Table>	
		</VBox>			

	</VBox> 

</mvc:View>
