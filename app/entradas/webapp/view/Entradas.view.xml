<mvc:View
    controllerName="entradas.controller.Entradas"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:p="sap.m.plugins"
    xmlns:t="sap.ui.table"
    xmlns:u="sap.ui.unified"
    xmlns:c="sap.ui.core"
>
    <Page
        id="pageEntradas"
        title="{i18n>title}"
    >
        <content>
            <Toolbar>
                <ToolbarSpacer />
                <Button
                    id="btnCrearEnt"
                    text="Crear nueva entrada"
                    press="onCrearEntrada"
                />
                <Button
                    id="btnborrarEnt"
                    type="Reject"
                    text="Eliminar"
                    press="onEliminarEntrada"
                />
                <ToolbarSpacer />
            </Toolbar>

            <t:Table
                id="tablaEntradas"
                rows="{ path: '/Entrada',  
						parameters: {expand: 'Socio,Estado,Calibre,Producto'},
						sorter: {
								path: 'Fecha_recogida',
								descending: true
								} 
					}"
                selectionMode="MultiToggle"
                ariaLabelledBy="title"
            >
                <t:columns>
                    <t:Column>
                        <Label text="Entrada" />
                        <t:template>
                            <Text
                                text="{Id}"
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Socio" />
                        <t:template>
                            <Text
                                text="{Socio/Nombre}"
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Fecha" />
                        <t:template>
                            <Text
                                text="{
        path: 'Fecha_recogida',
        type: 'sap.ui.model.type.Date',
        formatOptions: { pattern: 'dd/MM/yyyy' }
    }"
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Estado" />
                        <t:template>
                            <Text
                                text="{Estado/name}"
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Producto" />
                        <t:template>
                            <Text
                                text='{Producto/Nombre} - {Calibre/Nombre}'
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Kilos" />
                        <t:template>
                            <Text
                                text="{Kilos}"
                                wrapping="false"
                            />
                        </t:template>
                    </t:Column>

                    <t:Column>
                        <Label text="Mas info" />
                        <t:template>
                            <t:RowAction>
                                <t:RowActionItem
                                    type="Navigation"
                                    press="onDetail"
                                />
                            </t:RowAction>
                        </t:template>
                    </t:Column>
                </t:columns>
            </t:Table>
        </content>
    </Page>
</mvc:View>
